# Translation dictionaries
TRANSLATIONS = {
    "welcome_new": {
        "nl": "👋 Welkom bij Stephen's Privélessen!",
        "en": "👋 Welcome to Stephen's Private Lessons!"
    },
    "welcome_return": {
        "nl": "👋 Welkom terug bij Stephen's Privélessen, {name}!",
        "en": "👋 Welcome back to Stephen's Private Lessons, {name}!"
    },
    "ask_name": {
        "nl": "Hoe heet je? Dan kan ik je beter helpen.",
        "en": "What's your name? So I can help you better."
    },
    "nice_to_meet": {
        "nl": "Leuk je te ontmoeten, {name}! Hier zijn je opties:",
        "en": "Nice to meet you, {name}! Here are your options:"
    },
    "greeting": {
        "nl": "Hallo {name}!",
        "en": "Hello {name}!"
    },
    "greeting_no_name": {
        "nl": "Hallo!",
        "en": "Hello!"
    },
    "age_question": {
        "nl": "Ben je 18 jaar of ouder?",
        "en": "Are you 18 years or older?"
    },
    "age_yes": {
        "nl": "✅ Ja, 18+",
        "en": "✅ Yes, 18+"
    },
    "age_no": {
        "nl": "🚫 Nee, <18",
        "en": "🚫 No, <18"
    },
    "guardian_consent_needed": {
        "nl": "Ik heb toestemming van je ouder/voogd nodig. Stuur naam + 06-nummer.",
        "en": "I need permission from your parent/guardian. Send name + phone number."
    },
    "guardian_consent_needed_named": {
        "nl": "{name}, ik heb toestemming van je ouder/voogd nodig. Stuur naam + 06-nummer.",
        "en": "{name}, I need permission from your parent/guardian. Send name + phone number."
    },
    "guardian_consent_received": {
        "nl": "Bedankt! Ik heb de toestemming ontvangen.",
        "en": "Thank you! I have received the permission."
    },
    "guardian_consent_received_named": {
        "nl": "Bedankt! Ik heb de toestemming ontvangen, {name}.",
        "en": "Thank you! I have received the permission, {name}."
    },
    "trial_info": {
        "nl": "🎯 Proefles aanvragen:\n\nIk bied een gratis proefles aan van 30 minuten. Dit is een goede manier om te kijken of mijn aanpak bij je past.\n\nTyp 'plan' om een proefles te plannen, of 'info' voor meer informatie over mijn methode.",
        "en": "🎯 Trial lesson request:\n\nI offer a free 30-minute trial lesson. This is a good way to see if my approach suits you.\n\nType 'plan' to schedule a trial lesson, or 'info' for more information about my method."
    },
    "education_info_start": {
        "nl": "📚 Laten we eerst wat informatie verzamelen voor de proefles:",
        "en": "📚 Let's first collect some information for the trial lesson:"
    },
    "education_level_question": {
        "nl": "Wat is je huidige onderwijsniveau?",
        "en": "What is your current education level?"
    },
    "subject_question": {
        "nl": "Welk vak wil je bijles in?",
        "en": "Which subject do you want tutoring in?"
    },
    "year_question": {
        "nl": "In welk jaar/leerjaar zit je?",
        "en": "In which year/grade are you?"
    },
    "format_question": {
        "nl": "Hoe wil je de les volgen?",
        "en": "How would you like to follow the lesson?"
    },
    "info_complete": {
        "nl": "✅ Bedankt voor de informatie! Ik heb alles genoteerd.",
        "en": "✅ Thank you for the information! I have noted everything."
    },
    "minor_parent_contact": {
        "nl": "📞 Omdat je minderjarig bent, neem ik contact op met je ouder/voogd voor toestemming.\nZodra ik toestemming heb, kunnen we de proefles plannen!",
        "en": "📞 Since you are a minor, I will contact your parent/guardian for permission.\nOnce I have permission, we can schedule the trial lesson!"
    },
    "adult_proceed": {
        "nl": "✅ Perfect! Ik heb alle informatie genoteerd.\n🗓 Laten we nu een proefles plannen. Welke dagen/tijden werken voor jou?",
        "en": "✅ Perfect! I have noted all the information.\n🗓 Now let's schedule a trial lesson. Which days/times work for you?"
    },
    "age_check_needed": {
        "nl": "📋 Laat me eerst je leeftijd controleren voordat we verder gaan.",
        "en": "📋 Let me first check your age before we continue."
    },
    "planning_restriction": {
        "nl": "📝 Om lessen te kunnen plannen moet je eerst een proefles doen of geregistreerd zijn als leerling/ouder.\nTyp 'trial' voor een proefles, of neem contact op met Stephen om je te registreren.",
        "en": "📝 To schedule lessons, you must first do a trial lesson or be registered as a student/parent.\nType 'trial' for a trial lesson, or contact Stephen to register."
    },
    "payment_restriction": {
        "nl": "💳 Betalingen zijn alleen beschikbaar voor geregistreerde leerlingen.\nNeem contact op met Stephen om je te registreren als leerling.",
        "en": "💳 Payments are only available for registered students.\nContact Stephen to register as a student."
    },
    "parent_detected": {
        "nl": "👨‍👩‍👧‍👦 Bedankt voor je interesse in bijles voor je kind!\n📝 Laten we eerst wat informatie verzamelen:\nHoe heet je kind?",
        "en": "👨‍👩‍👧‍👦 Thank you for your interest in tutoring for your child!\n📝 Let's first collect some information:\nWhat's your child's name?"
    },
    "trial_planning_complete": {
        "nl": "✅ Bedankt! Ik heb je voorkeuren genoteerd.\n📞 Stephen neemt binnen 24 uur contact met je op om de proefles te bevestigen.",
        "en": "✅ Thank you! I have noted your preferences.\n📞 Stephen will contact you within 24 hours to confirm the trial lesson."
    },
    "language_question": {
        "nl": "🌍 In welke taal wil je communiceren?",
        "en": "🌍 In which language would you like to communicate?"
    },
    "language_dutch": {
        "nl": "🇳🇱 Nederlands",
        "en": "🇳🇱 Dutch"
    },
    "language_english": {
        "nl": "🇬🇧 English",
        "en": "🇬🇧 English"
    },
    "language_confirm": {
        "nl": "Bevestig je taalvoorkeur:",
        "en": "Confirm your language preference:"
    },
    "menu_help": {
        "nl": "Waarmee kan ik helpen?",
        "en": "How can I help you?"
    },
    "menu_trial": {
        "nl": "🎯 Proefles",
        "en": "🎯 Trial lesson"
    },
    "menu_plan": {
        "nl": "📅 Les plannen",
        "en": "📅 Schedule lesson"
    },
    "menu_payment": {
        "nl": "💳 Betaling",
        "en": "💳 Payment"
    },
    "menu_info": {
        "nl": "ℹ️ Informatie",
        "en": "ℹ️ Information"
    },
    "menu_stephen": {
        "nl": "👨‍🏫 Stephen spreken",
        "en": "👨‍🏫 Speak with Stephen"
    },
    "human_handoff": {
        "nl": "Ik verbind je nu door naar Stephen. Een moment alsjeblieft.",
        "en": "I'm now connecting you to Stephen. Please wait a moment."
    },
    "fallback_message": {
        "nl": "Ik begrijp het niet helemaal. Hier is het menu:",
        "en": "I don't quite understand. Here is the menu:"
    },
    "planning_requires_registration": {
        "nl": "📝 Om lessen te kunnen plannen moet je eerst een proefles doen of geregistreerd zijn als leerling/ouder.",
        "en": "📝 To schedule lessons, you must first do a trial lesson or be registered as a student/parent."
    },
    "planning_requires_registration_help": {
        "nl": "Typ 'trial' voor een proefles, of neem contact op met Stephen om je te registreren.",
        "en": "Type 'trial' for a trial lesson, or contact Stephen to register."
    },
    "payment_students_only": {
        "nl": "💳 Betalingen zijn alleen beschikbaar voor geregistreerde leerlingen.",
        "en": "💳 Payments are only available for registered students."
    },
    "payment_register_help": {
        "nl": "Neem contact op met Stephen om je te registreren als leerling.",
        "en": "Contact Stephen to register as a student."
    },
    "payment_info": {
        "nl": "💳 Betaalinformatie: stuur 'tikkie' als je een betaallink wilt, of vraag om een factuur.",
        "en": "💳 Payment information: send 'tikkie' if you want a payment link, or ask for an invoice."
    },
    "student_registered": {
        "nl": "✅ Je bent nu geregistreerd als leerling! Je kunt nu lessen plannen en betalingen regelen.",
        "en": "✅ You are now registered as a student! You can now schedule lessons and arrange payments."
    },
    "parent_registered": {
        "nl": "✅ Je bent geregistreerd als ouder/voogd! Je kunt nu lessen plannen voor je kind.",
        "en": "✅ You are registered as a parent/guardian! You can now schedule lessons for your child."
    },
    "education_info_start": {
        "nl": "📚 Laten we eerst wat informatie verzamelen voor de proefles:",
        "en": "📚 Let's first collect some information for the trial lesson:"
    },
    "not_understood": {
        "nl": "❓ Ik begrijp het niet helemaal. Kies een van de opties uit het menu hierboven.",
        "en": "❓ I don't quite understand. Choose one of the options from the menu above."
    },
    "info_complete": {
        "nl": "✅ Bedankt voor de informatie! Ik heb alles genoteerd.",
        "en": "✅ Thank you for the information! I have noted everything."
    },
    "minor_parent_contact": {
        "nl": "📞 Omdat je minderjarig bent, neem ik contact op met je ouder/voogd voor toestemming.",
        "en": "📞 Since you are a minor, I will contact your parent/guardian for permission."
    },
    "once_permission_received": {
        "nl": "Zodra ik toestemming heb, kunnen we de proefles plannen!",
        "en": "Once I have permission, we can schedule the trial lesson!"
    },
    "adult_proceed_planning": {
        "nl": "✅ Perfect! Ik heb alle informatie genoteerd.\n🗓 Laten we nu een proefles plannen. Welke dagen/tijden werken voor jou?",
        "en": "✅ Perfect! I have noted all the information.\n🗓 Now let's schedule a trial lesson. Which days/times work for you?"
    },
    "age_check_needed": {
        "nl": "📋 Laat me eerst je leeftijd controleren voordat we verder gaan.",
        "en": "📋 Let me first check your age before we continue."
    },
    "parent_detected": {
        "nl": "👨‍👩‍👧‍👦 Bedankt voor je interesse in bijles voor je kind!",
        "en": "👨‍👩‍👧‍👦 Thank you for your interest in tutoring for your child!"
    },
    "parent_info_start": {
        "nl": "📝 Laten we eerst wat informatie verzamelen:",
        "en": "📝 Let's first collect some information:"
    },
    "child_name_question": {
        "nl": "Hoe heet je kind?",
        "en": "What's your child's name?"
    },
    "human_handoff": {
        "nl": "Ik verbind je nu door naar Stephen. Een moment alsjeblieft.",
        "en": "I'm now connecting you to Stephen. Please wait a moment."
    },
    "invalid_name": {
        "nl": "Dat lijkt me geen echte naam. Kun je je voornaam geven?",
        "en": "That doesn't seem like a real name. Can you give me your first name?"
    },
    "invalid_name_format": {
        "nl": "Die naam bevat te veel symbolen of emoji's. Gebruik je echte naam.",
        "en": "That name contains too many symbols or emojis. Please use your real name."
    },
    "guardian_consent_received": {
        "nl": "Bedankt! Ik heb de toestemming ontvangen.",
        "en": "Thank you! I have received the permission."
    },
    "perfect_adult": {
        "nl": "✅ Perfect! Je bent volwassen.",
        "en": "✅ Perfect! You are an adult."
    },
    "planning_question": {
        "nl": "🗓 Laten we nu een proefles plannen. Welke dagen/tijden werken voor jou?",
        "en": "🗓 Now let's schedule a trial lesson. Which days/times work for you?"
    },
    "trial_planning_complete": {
        "nl": "✅ Bedankt! Ik heb je voorkeuren genoteerd.",
        "en": "✅ Thank you! I have noted your preferences."
    },
    "stephen_contact_24h": {
        "nl": "📞 Stephen neemt binnen 24 uur contact met je op om de proefles te bevestigen.",
        "en": "📞 Stephen will contact you within 24 hours to confirm the trial lesson."
    },
    "weekend_discount": {
        "nl": "🎉 {greeting} Weekendkorting is nu actief voor jou.",
        "en": "🎉 {greeting} Weekend discount is now active for you."
    },
    "name_updated": {
        "nl": "Ah, je naam is {name}! Ik had '{existing_name}' opgeslagen. Ik pas het aan.",
        "en": "Ah, your name is {name}! I had '{existing_name}' saved. I'll update it."
    },
    "guardian_consent_received_named": {
        "nl": "Bedankt! Ik heb de toestemming ontvangen, {name}.",
        "en": "Thank you! I have received the permission, {name}."
    },
    "guardian_consent_needed_named": {
        "nl": "{name}, ik heb toestemming van je ouder/voogd nodig. Stuur naam + 06-nummer.",
        "en": "{name}, I need permission from your parent/guardian. Send name + phone number."
    },
    "planning_greeting": {
        "nl": "🗓 {greeting} Welke dagen/tijden werken voor jou? (bijv. 'ma 19:00, wo 20:00')",
        "en": "🗓 {greeting} Which days/times work for you? (e.g. 'mon 19:00, wed 20:00')"
    },
    "info_menu_question": {
        "nl": "📄 Waarover wil je informatie?",
        "en": "📄 What information would you like?"
    },
    "faq_tariff": {
        "nl": "Mijn tarieven (versie 30 juli 2025):\n\n📚 Hoger onderwijs:\n• Enkel (1 les): €80\n• Twee (2 lessen): €135\n• Vier (4 lessen): €250\n\n🎓 Voortgezet onderwijs 20+:\n• Enkel: €70\n• Twee: €130\n• Vier: €230\n\n🎓 Voortgezet onderwijs 20-:\n• Enkel: €60\n• Twee: €100\n• Vier: €200\n\n🚗 Reiskosten (Amsterdam e.o.):\n• VU/UvA (niet Science Park): €15\n• Bij jou thuis (Amsterdam e.o.): €40\n• Science Park: €0\n\n⏰ Last-minute toeslagen:\n• < 24 uur vooraf: +20%\n• < 12 uur vooraf: +50%",
        "en": "My rates (version July 30, 2025):\n\n📚 Higher education:\n• Single (1 lesson): €80\n• Two (2 lessons): €135\n• Four (4 lessons): €250\n\n🎓 Secondary education 20+:\n• Single: €70\n• Two: €130\n• Four: €230\n\n🎓 Secondary education 20-:\n• Single: €60\n• Twee: €100\n• Vier: €200\n\n🚗 Travel costs (Amsterdam area):\n• VU/UvA (not Science Park): €15\n• At your home (Amsterdam area): €40\n• Science Park: €0\n\n⏰ Last-minute surcharges:\n• < 24 hours in advance: +20%\n• < 12 hours in advance: +50%"
    },
    "faq_conditions": {
        "nl": "📋 Pakketvoorwaarden:\n\n⏱️ Geldigheid:\n• Pakket van 2 lessen: geldig 2 weken na aankoopdatum\n• Pakket van 4 lessen: geldig 1 maand na aankoopdatum\n• Bij directe planning: geldigheid loopt vanaf eerste lesdatum\n\n🎯 Flex-premium (alleen bij niet-direct plannen):\n• Pakket van 2 lessen: +€15\n• Pakket van 4 lessen: +€30\n\n💳 Betaling & factuur:\n• Factuur na elke les\n• Termijn: 14 dagen\n\n❌ Annuleren/verzetten:\n• ≥24u vooraf: kosteloos\n• <24u vooraf: 100% van het tarief",
        "en": "📋 Package conditions:\n\n⏱️ Validity:\n• Package of 2 lessons: valid 2 weeks after purchase date\n• Package of 4 lessons: valid 1 month after purchase date\n• With direct scheduling: validity runs from first lesson date\n\n🎯 Flex-premium (only when not scheduling directly):\n• Package of 2 lessons: +€15\n• Package of 4 lessons: +€30\n\n💳 Payment & invoice:\n• Invoice after each lesson\n• Term: 14 days\n\n❌ Cancel/reschedule:\n• ≥24h in advance: free\n• <24h in advance: 100% of the rate"
    },
    "faq_package": {
        "nl": "📦 Pakketvoorwaarden:\n\n⏱️ Geldigheid:\n• Pakket van 2 lessen: geldig 2 weken na aankoopdatum\n• Pakket van 4 lessen: geldig 1 maand na aankoopdatum\n• Bij directe planning: geldigheid loopt vanaf eerste lesdatum\n\n🎯 Flex-premium (alleen bij niet-direct plannen):\n• Pakket van 2 lessen: +€15\n• Pakket van 4 lessen: +€30",
        "en": "📦 Package conditions:\n\n⏱️ Validity:\n• Package of 2 lessons: valid 2 weeks after purchase date\n• Package of 4 lessons: valid 1 month after purchase date\n• With direct scheduling: validity runs from first lesson date\n\n🎯 Flex-premium (only when not scheduling directly):\n• Package of 2 lessons: +€15\n• Package of 4 lessons: +€30"
    },
    "faq_travel_costs": {
        "nl": "🚗 Reiskosten (Amsterdam e.o.):\n\n• VU/UvA (niet Science Park): €15\n• Bij jou thuis (Amsterdam e.o.): €40\n• Science Park: €0",
        "en": "🚗 Travel costs (Amsterdam area):\n\n• VU/UvA (not Science Park): €15\n• At your home (Amsterdam area): €40\n• Science Park: €0"
    },
    "faq_last_minute": {
        "nl": "⏰ Last-minute toeslagen:\n\n• Geboekt < 24 uur vooraf: +20%\n• Geboekt < 12 uur vooraf: +50%",
        "en": "⏰ Last-minute surcharges:\n\n• Booked < 24 hours in advance: +20%\n• Booked < 12 hours in advance: +50%"
    },
    "faq_location": {
        "nl": "📍 Locaties:\n\n• Online lessen via video\n• In Utrecht\n• In Amsterdam (met reiskosten)\n• Bij jou thuis (Amsterdam e.o.): €40 reiskosten\n• VU/UvA (niet Science Park): €15 reiskosten\n• Science Park: €0 reiskosten",
        "en": "📍 Locations:\n\n• Online lessons via video\n• In Utrecht\n• In Amsterdam (with travel costs)\n• At your home (Amsterdam area): €40 travel costs\n• VU/UvA (not Science Park): €15 travel costs\n• Science Park: €0 travel costs"
    },
    "faq_method": {
        "nl": "🎯 Mijn methode:\n\nIk gebruik een persoonlijke aanpak aangepast aan jouw niveau en doelen. We werken samen aan:\n\n• Jouw specifieke leerdoelen\n• Praktische toepassingen\n• Regelmatige feedback en evaluatie\n• Flexibele planning die bij jou past",
        "en": "🎯 My method:\n\nI use a personal approach tailored to your level and goals. We work together on:\n\n• Your specific learning objectives\n• Practical applications\n• Regular feedback and evaluation\n• Flexible scheduling that suits you"
    },
    "faq_planning": {
        "nl": "🗓 Planning:\n\nWe plannen samen een schema dat voor jou werkt:\n\n• Flexibele tijden\n• Online of op locatie\n• Pakketten met verschillende geldigheidsperioden\n• Last-minute mogelijkheden (met toeslag)\n\nTyp 'plan' om een les te plannen!",
        "en": "🗓 Planning:\n\nWe plan together a schedule that works for you:\n\n• Flexible times\n• Online or on location\n• Packages with different validity periods\n• Last-minute options (with surcharge)\n\nType 'plan' to schedule a lesson!"
    },
    "faq_online": {
        "nl": "💻 Online lessen:\n\nJa, ik geef ook online lessen via video. Dit is ideaal voor:\n\n• Flexibiliteit in planning\n• Geen reiskosten\n• Comfort van thuis\n• Dezelfde kwaliteit als fysieke lessen",
        "en": "💻 Online lessons:\n\nYes, I also give online lessons via video. This is ideal for:\n\n• Flexibility in scheduling\n• No travel costs\n• Comfort of home\n• Same quality as physical lessons"
    },
    "faq_utrecht": {
        "nl": "🏫 Utrecht:\n\nIk geef lessen in Utrecht en online. In Utrecht:\n\n• Centrale locatie\n• Goed bereikbaar\n• Geen reiskosten\n• Flexibele tijden",
        "en": "🏫 Utrecht:\n\nI give lessons in Utrecht and online. In Utrecht:\n\n• Central location\n• Well accessible\n• No travel costs\n• Flexible times"
    },
    "faq_payment": {
        "nl": "💳 Betaling & factuur:\n\n• Factuur na elke les\n• Termijn: 14 dagen\n• Verschillende betaalmethoden mogelijk\n• Tikkie-link beschikbaar\n\nTyp 'pay' voor meer betaalopties!",
        "en": "💳 Payment & invoice:\n\n• Invoice after each lesson\n• Term: 14 days\n• Various payment methods possible\n• Tikkie link available\n\nType 'pay' for more payment options!"
    },
    "faq_invoice": {
        "nl": "📄 Factuur:\n\n• Factuur na elke les\n• Termijn: 14 dagen\n• Verschillende betaalmethoden mogelijk\n• Tikkie-link beschikbaar\n\nTyp 'pay' voor meer betaalopties!",
        "en": "📄 Invoice:\n\n• Invoice after each lesson\n• Term: 14 days\n• Various payment methods possible\n• Tikkie link available\n\nType 'pay' for more payment options!"
    },
    "faq_cancel": {
        "nl": "❌ Annuleren/verzetten:\n\n• ≥24u vooraf: kosteloos\n• <24u vooraf: 100% van het tarief\n• Omboeken mogelijk binnen geldigheidsperiode pakket",
        "en": "❌ Cancel/reschedule:\n\n• ≥24h in advance: free\n• <24h in advance: 100% of the rate\n• Rebooking possible within package validity period"
    },
    "faq_flex": {
        "nl": "🎯 Flex-premium:\n\nVoor extra flexibiliteit bij pakketten (alleen bij niet-direct plannen):\n\n• Pakket van 2 lessen: +€15\n• Pakket van 4 lessen: +€30\n\nDit geeft je meer tijd om de lessen in te plannen.",
        "en": "🎯 Flex-premium:\n\nFor extra flexibility with packages (only when not scheduling directly):\n\n• Package of 2 lessons: +€15\n• Package of 4 lessons: +€30\n\nThis gives you more time to schedule the lessons."
    },
    "menu_tarieven": {
        "nl": "💰 Tarieven",
        "en": "💰 Rates"
    },
    "menu_voorwaarden": {
        "nl": "📋 Voorwaarden",
        "en": "📋 Conditions"
    },
    "menu_reiskosten": {
        "nl": "🚗 Reiskosten",
        "en": "🚗 Travel Costs"
    },
    "menu_last_minute": {
        "nl": "⏰ Last-minute",
        "en": "⏰ Last-minute"
    },
    "menu_methode": {
        "nl": "🎯 Methode",
        "en": "🎯 Method"
    },
    "menu_planning": {
        "nl": "🗓 Planning",
        "en": "🗓 Planning"
    },
    "menu_locatie": {
        "nl": "📍 Locaties",
        "en": "📍 Locations"
    },
    "back_to_menu": {
        "nl": "🔙 Wil je terug naar het hoofdmenu?",
        "en": "🔙 Would you like to go back to the main menu?"
    },
    "menu_back": {
        "nl": "🔙 Terug naar hoofdmenu",
        "en": "🔙 Back to main menu"
    },
    "info_menu_question": {
        "nl": "📄 Welke informatie wil je?",
        "en": "📄 What information would you like?"
    }
}

def t(key, lang="nl", **kwargs):
    """Get translation for key in specified language"""
    if key in TRANSLATIONS and lang in TRANSLATIONS[key]:
        text = TRANSLATIONS[key][lang]
        return text.format(**kwargs) if kwargs else text
    else:
        # Fallback to requested language, then Dutch, then key
        if lang != "nl" and key in TRANSLATIONS and "nl" in TRANSLATIONS[key]:
            text = TRANSLATIONS[key]["nl"]
            return text.format(**kwargs) if kwargs else text
        else:
            return TRANSLATIONS.get(key, {}).get("nl", key)