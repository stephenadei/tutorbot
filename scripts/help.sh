#!/bin/bash

# TutorBot - Help Script
# Shows all available commands and shortcuts

echo "ğŸ¤– TutorBot - Available Commands"
echo "================================"
echo ""

echo "ğŸš€ QUICK COMMANDS (aliases):"
echo "  wipe        - Wipe all contacts and conversations (short)"
echo "  wipebot     - Wipe all contacts and conversations (long)"
echo "  wipeall     - Wipe all labels and attributes (short)"
echo "  wipeallbot  - Wipe all labels and attributes (long)"
echo "  start       - Quick Docker restart (short)"
echo "  startbot    - Full Docker restart (down + up) (long)"
echo "  logs        - Show Docker logs (short)"
echo "  logsbot     - Show Docker logs (long)"
echo "  clearlogs   - Clear Docker logs (short)"
echo "  clearlogsbot - Clear Docker logs (long)"
echo "  clearlogsall - Clear all logs and Docker cache (thorough)"
echo "  status      - Show Docker status (short)"
echo "  statusbot   - Show Docker status (long)"
echo "  validate    - Validate project structure (short)"
echo "  validatebot - Validate project structure (long)"
echo "  help        - Show all commands (short)"
echo "  helpbot     - Show all commands (long)"
echo ""

echo "ğŸ”§ DEVELOPMENT COMMANDS:"
echo "  ./scripts/dev/dev.sh restart              # Quick restart (for env changes)"
echo "  ./scripts/dev/dev.sh rebuild              # Rebuild and restart (for deps)"
echo "  ./scripts/dev/dev.sh logs                 # Show live logs"
echo "  ./scripts/dev/dev.sh clean                # Clean and rebuild everything"
echo ""
echo "ğŸ“‹ LOG MANAGEMENT:"
echo "  logs                                    # Show live logs"
echo "  logsbot                                 # Show live logs (long)"
echo "  clearlogs                               # Clear Docker logs"
echo "  clearlogsbot                            # Clear logs with confirmation"
echo "  clearlogsall                            # Clear all logs and cache"
echo "  docker-compose logs --tail=50           # Show last 50 lines"
echo "  docker-compose logs --since=1h          # Show logs from last hour"
echo "  docker-compose logs --clear             # Clear all logs"
echo "  docker system prune -f                  # Clear all Docker cache"
echo ""

echo "ğŸ› DEBUG COMMANDS (aliases):"
echo "  debug       - Toggle debug mode"
echo "  debugbot    - Toggle debug mode (long)"
echo "  debugon     - Enable public debug mode"
echo "  debugoff    - Disable debug mode"
echo "  debugprivate - Enable private debug mode"
echo "  debugconsole - Enable console debug mode"
echo "  debugstatus - Show debug status"
echo ""

echo "âœ… CONFIRMATION COMMANDS (aliases):"
echo "  confirm     - Toggle confirmation mode"
echo "  confirmbot  - Toggle confirmation mode (long)"
echo "  confirmon   - Enable confirmations"
echo "  confirmoff  - Disable confirmations"
echo "  confirmstatus - Show confirmation status"
echo ""

echo "ğŸ“‹ ENVIRONMENT COMMANDS (aliases):"
echo "  export_env  - Export environment variables from .env"
echo "  exportenv   - Export environment variables (short)"
echo "  source scripts/dev/export_env.sh           # Manual export"
echo ""

echo "ğŸ“ PROJECT STRUCTURE:"
echo "  /home/stephen/tutorbot/"
echo "  â”œâ”€â”€ main.py                    # Core Flask application"
echo "  â”œâ”€â”€ requirements.txt           # Python dependencies"
echo "  â”œâ”€â”€ docker-compose.yml         # Docker configuration"
echo "  â”œâ”€â”€ Dockerfile                 # Docker image"
echo "  â”œâ”€â”€ .env                       # Environment variables (not in git)"
echo "  â”œâ”€â”€ env_example.txt            # Environment template"
echo "  â”œâ”€â”€ scripts/help.sh            # This help script"
echo "  â”œâ”€â”€ tests/                     # Automated tests (unit & integration)"
echo "  â”‚   â”œâ”€â”€ run_tests.py           # Test runner for all tests"
echo "  â”‚   â”œâ”€â”€ test_main.py           # Main application unit tests"
echo "  â”‚   â”œâ”€â”€ test_config.py         # Configuration tests"
echo "  â”‚   â”œâ”€â”€ test_prefill_overview.py # Prefill functionality tests"
echo "  â”‚   â””â”€â”€ test_setup.py          # Setup tests"
echo "  â”œâ”€â”€ scripts/                   # Organized scripts directory"
echo "  â”‚   â”œâ”€â”€ cw_api.py              # Chatwoot API utilities"
echo "  â”‚   â”œâ”€â”€ help.sh                # This help script"
echo "  â”‚   â”œâ”€â”€ dev/                   # Development scripts"
echo "  â”‚   â”‚   â”œâ”€â”€ dev.sh             # Development shortcuts"
echo "  â”‚   â”‚   â””â”€â”€ export_env.sh      # Environment export script"
echo "  â”‚   â”œâ”€â”€ data/                  # Data management scripts"
echo "  â”‚   â”‚   â”œâ”€â”€ wipe.sh            # Quick contact wipe script"
echo "  â”‚   â”‚   â”œâ”€â”€ wipe_all.sh        # Quick data wipe script"
echo "  â”‚   â”‚   â”œâ”€â”€ wipe_contacts.py   # Manual contact wipe"
echo "  â”‚   â”‚   â”œâ”€â”€ wipe_all.py        # Manual data wipe"
echo "  â”‚   â”‚   â””â”€â”€ cleanup_all.py     # Clean up all data"
echo "  â”‚   â”œâ”€â”€ debug/                 # Debug and confirmation scripts"
echo "  â”‚   â”‚   â”œâ”€â”€ debug_*.sh         # Debug management scripts"
echo "  â”‚   â”‚   â””â”€â”€ confirm_*.sh       # Confirmation management scripts"
echo "  â”‚   â”œâ”€â”€ setup/                 # Setup and configuration scripts"
echo "  â”‚   â”‚   â”œâ”€â”€ setup_attributes.py    # Setup custom attributes"
echo "  â”‚   â”‚   â”œâ”€â”€ setup_labels.py        # Setup labels"
echo "  â”‚   â”‚   â”œâ”€â”€ setup_all.py           # Setup everything"
echo "  â”‚   â”‚   â”œâ”€â”€ setup_automation_rules.py"
echo "  â”‚   â”‚   â”œâ”€â”€ setup_chatwoot.py      # Setup Chatwoot configuration"
echo "  â”‚   â”‚   â””â”€â”€ setup_custom_attributes.py"
echo "  â”‚   â”œâ”€â”€ analysis/              # Analysis and audit scripts"
echo "  â”‚   â”‚   â”œâ”€â”€ analyze_logs.py        # Analyze log files"
echo "  â”‚   â”‚   â”œâ”€â”€ check_inboxes.py       # Check inbox status"
echo "  â”‚   â”‚   â”œâ”€â”€ list_contact_languages.py"
echo "  â”‚   â”‚   â”œâ”€â”€ list_automation.py     # List automation rules"
echo "  â”‚   â”‚   â”œâ”€â”€ audit_attributes.py    # Audit custom attributes"
echo "  â”‚   â”‚   â””â”€â”€ validate_structure.py  # Validate project structure"
echo "  â”‚   â””â”€â”€ testing/               # Manual testing tools"
echo "  â”‚       â”œâ”€â”€ show_prefill_overview.py # Show prefill overview"
echo "  â”‚       â”œâ”€â”€ test_bot.py            # Manual bot testing"
echo "  â”‚       â”œâ”€â”€ test_chatwoot_api.py   # Manual API testing"
echo "  â”‚       â”œâ”€â”€ test_input_select.py   # Input select testing"
echo "  â”‚       â”œâ”€â”€ test_real_message.py   # Real message testing"
echo "  â”‚       â””â”€â”€ test_real_conversation.py # Real conversation testing"
echo "  â”œâ”€â”€ config/                    # Configuration files"
echo "  â”‚   â”œâ”€â”€ contact_attributes.yaml"
echo "  â”‚   â”œâ”€â”€ conversation_attributes.yaml"
echo "  â”‚   â”œâ”€â”€ labels_lean.yaml"
echo "  â”‚   â””â”€â”€ automations.yaml"
echo "  â”œâ”€â”€ docker/                    # Docker documentation"
echo "  â”‚   â””â”€â”€ README.md              # Docker setup and usage"
echo "  â””â”€â”€ docs/                      # Documentation"
echo "      â”œâ”€â”€ README_chatwoot_setup.md"
echo "      â”œâ”€â”€ WHATSAPP_FORMATTING.md"
echo "      â”œâ”€â”€ INTEGRATION_ROADMAP.md"
echo "      â””â”€â”€ CURRENT_MOCKED_FUNCTIONS.md"
echo ""

echo "ğŸ”§ SETUP COMMANDS:"
echo "  python3 scripts/setup/setup_all.py           # Setup everything (attributes + labels)"
echo "  python3 scripts/setup/setup_attributes.py    # Setup custom attributes only"
echo "  python3 scripts/setup/setup_labels.py        # Setup labels only"
echo "  python3 scripts/setup/setup_automation_rules.py  # Setup automation rules"
echo "  python3 scripts/setup/setup_chatwoot.py      # Setup Chatwoot configuration"
echo "  python3 scripts/analysis/validate_structure.py  # Validate project structure"
echo ""

echo "ğŸ§ª TESTING COMMANDS:"
echo "  ./scripts/data/wipe.sh                      # Quick contact wipe (automatic)"
echo "  ./scripts/data/wipe_all.sh                  # Quick data wipe (labels + attributes)"
echo "  python3 scripts/data/wipe_contacts.py       # Manual contact wipe"
echo "  python3 scripts/data/wipe_contacts.py --auto-wipe  # Auto-wipe (no confirmation)"
echo "  python3 scripts/data/wipe_contacts.py --force      # Manual wipe (with confirmation)"
echo "  python3 scripts/data/wipe_all.py            # Manual data wipe"
echo "  python3 scripts/data/wipe_all.py --auto-wipe       # Auto data wipe (no confirmation)"
echo "  python3 scripts/data/cleanup_all.py         # Clean up all data"
echo "  docker-compose restart                 # Quick restart (keep container)"
echo "  docker-compose down && docker-compose up -d  # Full restart (rebuild)"
echo "  docker-compose logs -f                 # Show live logs"
echo "  docker-compose logs --tail=50          # Show last 50 log lines"
echo "  docker-compose logs --since=1h         # Show logs from last hour"
echo "  docker-compose ps                      # Show container status"
echo "  docker-compose logs --clear            # Clear all logs"
echo "  docker system prune -f                 # Clear all Docker logs and cache"
echo ""

echo "ğŸ§ª AUTOMATED TESTS (tests/):"
echo "  python3 tests/run_tests.py                 # Run all automated tests"
echo "  python3 tests/run_tests.py --category core # Run core functionality tests"
echo "  python3 tests/run_tests.py --category api  # Run API integration tests"
echo "  python3 tests/test_prefill_overview.py     # Test prefill overview functionality"
echo ""
echo "ğŸ”§ MANUAL TESTING TOOLS (scripts/testing/):"
echo "  python3 scripts/testing/show_prefill_overview.py # Show prefill overview for conversation"
echo "  python3 scripts/testing/test_real_message.py     # Test with real message"
echo "  python3 scripts/testing/test_real_conversation.py # Test with real conversation"
echo "  python3 scripts/testing/test_bot.py              # Test bot functionality"
echo "  python3 scripts/testing/test_chatwoot_api.py     # Test Chatwoot API"
echo "  python3 scripts/testing/test_input_select.py     # Test input selection"
echo ""

echo "ğŸ§ª COMPREHENSIVE TEST SUITE:"
echo "  python3 tests/test_setup.py            # Verify test environment setup"
echo "  python3 tests/run_tests.py             # Run all tests"
echo "  python3 tests/run_tests.py --list-categories # List available test categories"
echo "  python3 tests/run_tests.py --category core   # Run core functionality tests"
echo "  python3 tests/run_tests.py --category flow   # Run flow tests"
echo "  python3 tests/run_tests.py --category api    # Run API tests"
echo "  python3 tests/run_tests.py --test TestTranslation.test_basic_translation  # Run single test"
echo "  python3 tests/run_tests.py --verbose         # Run tests with verbose output"
echo ""

echo "ğŸ§ª TEST CATEGORIES:"
echo "  core        - Core functionality (translation, message, utility)"
echo "  flow        - User flows (intake, menu, integration)"
echo "  api         - API integration (openai, payment, webhook)"
echo "  translation - Translation system tests"
echo "  message     - Message handling tests"
echo "  openai      - OpenAI integration tests"
echo "  prefill     - Prefill functionality tests"
echo "  segment     - Segment detection tests"
echo "  planning    - Planning functionality tests"
echo "  payment     - Payment functionality tests"
echo "  intake      - Intake flow tests"
echo "  menu        - Menu handling tests"
echo "  webhook     - Webhook handling tests"
echo "  utility     - Utility function tests"
echo "  email       - Email and payment handling tests"
echo "  integration - Integration scenario tests"
echo "  error       - Error handling tests"
echo ""

echo "ğŸ“ ORGANIZED SCRIPTS:"
echo "  ./scripts/                              # All scripts directory"
echo "  ./scripts/dev/                          # Development scripts"
echo "  ./scripts/data/                         # Data management scripts"
echo "  ./scripts/debug/                        # Debug and confirmation scripts"
echo "  ./scripts/setup/                        # Setup and configuration scripts"
echo "  ./scripts/analysis/                     # Analysis and audit scripts"
echo "  ./scripts/testing/                      # Testing scripts"
echo ""

echo "ğŸ”§ SCRIPT CATEGORIES:"
echo "  Development:    ./scripts/dev/dev.sh"
echo "  Data Management: ./scripts/data/wipe.sh, ./scripts/data/wipe_all.sh"
echo "  Debug Management: ./scripts/debug/debug_*.sh"
echo "  Confirmation:   ./scripts/debug/confirm_*.sh"
echo "  Environment:    ./scripts/dev/export_env.sh"
echo "  Setup:          ./scripts/setup/setup_*.py"
echo "  Analysis:       ./scripts/analysis/*.py"
echo "  Manual Testing: ./scripts/testing/*.py"
echo ""

echo "ğŸ“‹ ENVIRONMENT VARIABLES:"
echo "  CW_URL=https://crm.stephenadei.nl"
echo "  CW_ACC_ID=1"
echo "  CW_ADMIN_TOKEN=your_admin_token"
echo "  CW_TOKEN=your_bot_token"
echo "  CW_HMAC_SECRET=your_hmac_secret"
echo "  OPENAI_API_KEY=your_openai_key"
echo "  STRIPE_WEBHOOK_SECRET=your_stripe_secret"
echo ""

echo "ğŸŒ WEBHOOK URL:"
echo "  https://your-domain.com/cw"
echo ""

echo "ğŸ’¡ TIPS:"
echo "  â€¢ Always run commands from /home/stephen/tutorbot/"
echo "  â€¢ Use aliases for quick access: wipebot, startbot, validatebot"
echo "  â€¢ Check .cursorrules for development guidelines"
echo "  â€¢ Run validatebot before making changes"
echo "  â€¢ Use ./scripts/dev/dev.sh for development tasks"
echo "  â€¢ Use exportenv before running Python scripts directly"
echo "  â€¢ Debug commands help with troubleshooting"
echo "  â€¢ Analysis scripts help understand system state"
echo ""

echo "ğŸ“š DOCUMENTATION:"
echo "  docs/README_chatwoot_setup.md          # Complete setup guide"
echo "  docs/WHATSAPP_FORMATTING.md            # WhatsApp formatting guide"
echo "  docs/INTEGRATION_ROADMAP.md            # Calendar & payment integration roadmap"
echo "  docs/CURRENT_MOCKED_FUNCTIONS.md       # Mocked functions overview"
echo "  .cursorrules                           # Development guidelines"
echo "  README.md                              # Project overview"
echo ""

echo "ğŸ¯ QUICK START:"
echo "  1. validate                            # Validate structure"
echo "  2. exportenv                           # Export environment variables"
echo "  3. wipe                                # Clear contacts"
echo "  4. start                               # Start server"
echo "  5. Test with WhatsApp messages"
echo ""

echo "ğŸ” DEBUGGING & ANALYSIS:"
echo "  docker-compose logs -f tutorbot        # Live logs"
echo "  docker-compose exec tutorbot bash      # Enter container"
echo "  python3 tests/run_tests.py --category prefill # Test prefill"
echo "  python3 scripts/analysis/analyze_logs.py        # Analyze log files"
echo "  python3 scripts/analysis/check_inboxes.py       # Check inbox status"
echo "  python3 scripts/analysis/list_contact_languages.py  # List contact languages"
echo "  python3 scripts/analysis/list_automation.py     # List automation rules"
echo "  python3 scripts/analysis/audit_attributes.py    # Audit custom attributes"
echo "  debugstatus                            # Check debug status"
echo "  confirmstatus                          # Check confirmation status"
echo ""

echo "ğŸš€ INTEGRATION STATUS:"
echo "  âœ… Core Bot Logic - Fully functional"
echo "  âœ… Chatwoot Integration - Fully functional"
echo "  âœ… Prefill & Intake System - Fully functional"
echo "  âœ… WhatsApp Formatting - Fully functional"
echo "  âœ… Menu System - Fully functional"
echo "  ğŸ”„ Calendar Integration - Partially implemented (mocked)"
echo "  ğŸ”„ Payment Integration - Partially implemented (mocked)"
echo ""

echo "ğŸ“‹ NEXT STEPS:"
echo "  â€¢ Calendar Integration: Google Calendar API setup"
echo "  â€¢ Payment Integration: Stripe API setup"
echo "  â€¢ See docs/INTEGRATION_ROADMAP.md for detailed plan"
echo "" 